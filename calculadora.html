<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora 3D | ODA Studio</title>

  <link rel="stylesheet" href="calculadora.css" />
</head>

<body>
  <main class="oda-wrap">
    <header class="oda-header">
      <div>
        <h1 class="oda-title">Calculadora de Cotizaci√≥n 3D</h1>
        <p class="oda-subtitle">
          Cotiza r√°pido para vender: <b>precio cliente</b> + <b>costo real</b> + <b>ganancia</b> ‚úÖ
        </p>
      </div>
      <div class="oda-badge">ODA STUDIO</div>
    </header>

    <section class="oda-grid">

      <!-- INPUTS -->
      <section class="oda-card">
        <div class="oda-cardHead">
          <h2>Datos</h2>
          <span class="oda-hint">Auto-c√°lculo</span>
        </div>

        <div class="oda-cardBody">

          <!-- Material -->
          <div class="oda-section">
            <div class="oda-sectionTitle">
              <strong>1) Material</strong>
              <span class="oda-mini">Regla de 3</span>
            </div>

            <div class="oda-row">
              <label class="oda-label">
                Precio filamento / kg
                <input id="filamentPriceKg" class="oda-input" type="number" min="0" step="0.01" placeholder="Ej. 450">
              </label>

              <label class="oda-label">
                Peso pieza (g)
                <input id="pieceWeightG" class="oda-input" type="number" min="0" step="0.1" placeholder="Ej. 120">
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Peso del kilo (g)
                <input id="kgWeightG" class="oda-input" type="number" min="1" step="1" value="1000">
              </label>

              <label class="oda-label">
                Multiplicador (venta)
                <select id="materialMultiplier" class="oda-input">
                  <option value="2" selected>x2 (recomendado)</option>
                  <option value="1.8">x1.8 (competitivo)</option>
                  <option value="2.2">x2.2 (premium)</option>
                </select>
              </label>
            </div>

            <p class="oda-help">
              Material costo real = (peso pieza √ó precio kg) √∑ 1000 ‚Ä¢ Material cliente = costo real √ó multiplicador
            </p>
          </div>

          <!-- Luz -->
          <div class="oda-section">
            <div class="oda-sectionTitle">
              <strong>2) Luz + Desgaste</strong>
              <span class="oda-mini">$4/h + 15%</span>
            </div>

            <div class="oda-row">
              <label class="oda-label">
                Horas impresi√≥n
                <input id="lightHours" class="oda-input" type="number" min="0" step="1" placeholder="Ej. 6">
              </label>

              <label class="oda-label">
                Minutos
                <input id="lightMinutes" class="oda-input" type="number" min="0" step="1" placeholder="Ej. 30">
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Luz por hora (MXN)
                <input id="lightRate" class="oda-input" type="number" min="0" step="0.5" value="4">
              </label>

              <label class="oda-label">
                Desgaste (%)
                <input id="wearPercent" class="oda-input" type="number" min="0" step="1" value="15">
              </label>
            </div>

            <p class="oda-help">
              Desgaste = (material costo real + luz) √ó desgaste%
            </p>
          </div>

          <!-- Mano de obra -->
          <div class="oda-section">
            <div class="oda-sectionTitle">
              <strong>3) Tu tiempo / Mano de obra</strong>
              <span class="oda-mini">Imprimir o dise√±ar</span>
            </div>

            <div class="oda-row">
              <label class="oda-label">
                Tipo de trabajo
                <select id="jobType" class="oda-input">
                  <option value="printOnly" selected>Solo impresi√≥n</option>
                  <option value="prep">Preparaci√≥n + limpieza</option>
                  <option value="designAssist">Ajustes de archivo</option>
                  <option value="fullDesign">Dise√±o completo</option>
                </select>
              </label>

              <label class="oda-label">
                Hora extra
                <select id="extraRateMode" class="oda-input">
                  <option value="10">$10/h</option>
                  <option value="15" selected>$15/h</option>
                  <option value="20">$20/h</option>
                </select>
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Horas trabajadas
                <input id="laborHours" class="oda-input" type="number" min="0" step="1" placeholder="Ej. 1">
              </label>

              <label class="oda-label">
                Minutos trabajados
                <input id="laborMinutes" class="oda-input" type="number" min="0" step="1" placeholder="Ej. 30">
              </label>
            </div>

            <p class="oda-help">Primera hora base: <b id="jobHint">$50</b></p>
          </div>

          <!-- Riesgo -->
          <div class="oda-section">
            <div class="oda-sectionTitle">
              <strong>4) Riesgo + Extras</strong>
              <span class="oda-mini">Para no perder</span>
            </div>

            <div class="oda-row">
              <label class="oda-label">
                Riesgo
                <select id="riskPercent" class="oda-input">
                  <option value="10">Bajo (10%)</option>
                  <option value="20" selected>Normal (20%)</option>
                  <option value="30">Alto (30%)</option>
                </select>
              </label>

              <label class="oda-label">
                M√≠nimo de cobro
                <input id="minPrice" class="oda-input" type="number" min="0" step="10" value="120">
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Extras (pintura/post)
                <input id="extras" class="oda-input" type="number" min="0" step="10" value="0">
              </label>

              <label class="oda-label">
                Nota (opcional)
                <input id="note" class="oda-input" type="text" placeholder="Ej. pintura met√°lica, express...">
              </label>
            </div>
          </div>

          <div class="oda-actions">
            <button class="oda-btn oda-btnPrimary" id="btnCalc">‚ö° Calcular</button>
            <button class="oda-btn oda-btnGhost" id="btnReset">üßº Reiniciar</button>
            <button class="oda-btn oda-btnGhost" id="btnPDFPreview">üëÅÔ∏è Vista PDF</button>
            <button class="oda-btn oda-btnWhats" id="btnPDFShare">üì≤ Enviar PDF</button>
          </div>

          <div class="oda-error" id="errorBox"></div>

          <p class="oda-help oda-mt2">
            üìå Tip: En Android/Chrome, ‚ÄúEnviar PDF‚Äù abre el men√∫ compartir para mandarlo a WhatsApp.
          </p>

        </div>
      </section>

      <!-- RESULTS -->
      <aside class="oda-card">
        <div class="oda-cardHead">
          <h2>Resultado</h2>
          <span class="oda-hint">Cliente / Ganancia</span>
        </div>

        <div class="oda-cardBody">
          <div class="oda-totalBox">
            <div class="oda-pill">TOTAL CLIENTE</div>
            <div class="oda-big" id="finalTotal">$0.00</div>

            <div class="oda-breakdown">
              <div class="oda-line"><span>Material (costo real)</span><b id="materialBase">$0.00</b></div>
              <div class="oda-line"><span>Material (cliente)</span><b id="materialClient">$0.00</b></div>
              <div class="oda-line"><span>Luz</span><b id="lightCost">$0.00</b></div>
              <div class="oda-line"><span>Desgaste</span><b id="wearCost">$0.00</b></div>
              <div class="oda-line"><span>Tu tiempo</span><b id="laborCost">$0.00</b></div>
              <div class="oda-line"><span>Extras</span><b id="extrasCost">$0.00</b></div>

              <div class="oda-line oda-sepTop"><span>Subtotal</span><b class="oda-good" id="subtotal">$0.00</b></div>
              <div class="oda-line"><span>Riesgo</span><b class="oda-warn" id="riskCost">$0.00</b></div>

              <div class="oda-line oda-sepTop"><span><b>Precio final</b></span><b id="finalTotal2">$0.00</b></div>
              <div class="oda-line"><span>Costo real</span><b id="realCost">$0.00</b></div>
              <div class="oda-line"><span><b>Ganancia</b></span><b class="oda-good" id="profit">$0.00</b></div>
              <div class="oda-line"><span>Ganancia %</span><b id="profitPct">0%</b></div>
              <div class="oda-line"><span>M√≠nimo aplicado</span><b id="minApplied">No</b></div>
            </div>
          </div>
        </div>
      </aside>

    </section>
  </main>

  <!-- ‚úÖ LIBRER√çA PDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- ‚úÖ TU JS -->
  <script src="calculadora.js" defer></script>
</body>
</html>
