<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <title>Calculadora 3D | ODA Internal</title>

  <meta name="description" content="Herramienta interna de cotizaciÃ³n para impresiÃ³n 3D." />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="theme-color" content="#050505" />

  <!-- Fonts (Optimized) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />

  <!-- Preload Critical CSS -->
  <link rel="preload" href="css/calculadora.css" as="style" />

  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" />

  <!-- Estilos -->
  <link rel="stylesheet" href="css/calculadora.css" />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âš¡</text></svg>" />
</head>

<body>
  <!-- Security Overlay -->
  <div id="securityOverlay" class="security-lock">
    <div class="lock-box">
      <div class="lock-icon">ðŸ”’</div>
      <h2>Acceso Restringido</h2>
      <p>Herramienta Interna ODA</p>
      <input type="password" id="passInput" placeholder="ContraseÃ±a..." />
      <button id="btnUnlock">Desbloquear</button>
      <p id="lockMsg" class="lock-error"></p>
    </div>
  </div>

  <!-- Background FX -->
  <div class="cyber-bg" aria-hidden="true">
    <div class="grid-overlay"></div>
    <div class="scan-line"></div>
  </div>

  <main class="oda-wrap blur-content" id="mainContent">
    <header class="oda-header">
      <div>
        <h1 class="oda-title">Calculadora 3D <span class="oda-ver">v2.0</span></h1>
        <p class="oda-subtitle">
          CotizaciÃ³n profesional interna.
        </p>
      </div>
      <div class="oda-badge">INTERNAL ONLY</div>
    </header>

    <section class="oda-grid">

      <!-- INPUTS -->
      <section class="oda-card input-card">
        <div class="oda-cardHead">
          <h2>ParÃ¡metros</h2>
          <span class="oda-hint">Datos del Proyecto</span>
        </div>

        <div class="oda-cardBody">

          <!-- Material -->
          <fieldset class="oda-section">
            <legend class="oda-sectionTitle">
              <strong>1. Material</strong>
            </legend>

            <div class="oda-row">
              <label class="oda-label">
                Precio filamento / kg
                <input id="filamentPriceKg" class="oda-input" type="number" min="0" step="10" placeholder="Ej. 450">
              </label>

              <label class="oda-label">
                Peso pieza (g)
                <input id="pieceWeightG" class="oda-input" type="number" min="0" step="0.1" placeholder="Ej. 120">
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Peso del carrete (g)
                <input id="kgWeightG" class="oda-input" type="number" min="1" step="1" value="1000">
              </label>

              <label class="oda-label">
                Multiplicador (Venta)
                <select id="materialMultiplier" class="oda-input">
                  <option value="1.8">x1.8 (Competitivo)</option>
                  <option value="2" selected>x2.0 (EstÃ¡ndar)</option>
                  <option value="2.5">x2.5 (Premium)</option>
                  <option value="3">x3.0 (Exclusivo)</option>
                </select>
              </label>
            </div>
          </fieldset>

          <!-- Tiempo / Luz -->
          <fieldset class="oda-section">
            <legend class="oda-sectionTitle">
              <strong>2. Tiempo de ImpresiÃ³n</strong>
            </legend>

            <div class="oda-row">
              <label class="oda-label">
                Horas
                <input id="lightHours" class="oda-input" type="number" min="0" step="1" placeholder="0">
              </label>

              <label class="oda-label">
                Minutos
                <input id="lightMinutes" class="oda-input" type="number" min="0" max="59" step="1" placeholder="0">
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Costo Luz/Hora (MXN)
                <input id="lightRate" class="oda-input" type="number" min="0" step="0.5" value="4">
              </label>

              <label class="oda-label">
                Factor Desgaste (%)
                <input id="wearPercent" class="oda-input" type="number" min="0" step="1" value="15">
              </label>
            </div>
          </fieldset>

          <!-- Mano de obra -->
          <fieldset class="oda-section">
            <legend class="oda-sectionTitle">
              <strong>3. Mano de Obra</strong>
              <span class="oda-mini" id="jobHint">$50 base</span>
            </legend>

            <div class="oda-row">
              <label class="oda-label">
                Tipo de Trabajo
                <select id="jobType" class="oda-input">
                  <option value="printOnly" selected>Solo ImpresiÃ³n</option>
                  <option value="prep">Prep + Laminado</option>
                  <option value="designAssist">Ajustes DiseÃ±o</option>
                  <option value="fullDesign">DiseÃ±o Completo</option>
                </select>
              </label>

              <label class="oda-label">
                Tarifa Extra / Hora
                <select id="extraRateMode" class="oda-input">
                  <option value="10">$10/h (BÃ¡sico)</option>
                  <option value="15" selected>$15/h (EstÃ¡ndar)</option>
                  <option value="25">$25/h (Pro)</option>
                </select>
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Horas Trabajadas
                <input id="laborHours" class="oda-input" type="number" min="0" step="1" placeholder="0">
              </label>

              <label class="oda-label">
                Minutos Trabajados
                <input id="laborMinutes" class="oda-input" type="number" min="0" max="59" step="1" placeholder="0">
              </label>
            </div>
          </fieldset>

          <!-- Riesgo / Extras -->
          <fieldset class="oda-section">
            <legend class="oda-sectionTitle">
              <strong>4. Ajustes Finales</strong>
            </legend>

            <div class="oda-row">
              <label class="oda-label">
                Factor de Riesgo
                <select id="riskPercent" class="oda-input">
                  <option value="10">10% (Bajo)</option>
                  <option value="20" selected>20% (Normal)</option>
                  <option value="30">30% (Alto/Complejo)</option>
                </select>
              </label>

              <label class="oda-label">
                Precio MÃ­nimo
                <input id="minPrice" class="oda-input" type="number" min="0" step="10" value="120">
              </label>
            </div>

            <div class="oda-row oda-mt">
              <label class="oda-label">
                Extras (Pintura/Post)
                <input id="extras" class="oda-input" type="number" min="0" step="10" value="0">
              </label>

              <label class="oda-label">
                Nota Interna
                <input id="note" class="oda-input" type="text" placeholder="Detalles opcionales...">
              </label>
            </div>
          </fieldset>

          <div class="oda-actions">
            <button class="oda-btn oda-btnPrimary" id="btnCalc">Calcular âš¡</button>
            <button class="oda-btn oda-btnGhost" id="btnReset">Reset ðŸ§¼</button>
            <button class="oda-btn oda-btnGhost" id="btnCopy">Copiar ðŸ“‹</button>
            <button class="oda-btn oda-btnGhost" id="btnPdf">PDF ðŸ“„</button>
            <button class="oda-btn oda-btnWhats" id="btnWhats">WhatsApp ðŸ’¬</button>
          </div>

          <div class="oda-error" id="errorBox" aria-live="assertive"></div>
        </div>
      </section>

      <!-- RESULTS -->
      <aside class="oda-card result-card">
        <div class="oda-cardHead">
          <h2>CotizaciÃ³n Final</h2>
          <span class="oda-hint">Desglose</span>
        </div>

        <div class="oda-cardBody">
          <div class="oda-totalBox">
            <div class="oda-pill">PRECIO AL CLIENTE</div>
            <div class="oda-big" id="finalTotal">$0.00</div>

            <div class="profit-badge" id="profitBadge">
              Ganancia: <span id="profitDisplay">$0.00</span>
            </div>

            <div class="oda-breakdown">
              <div class="oda-line"><span>Material (Cliente)</span><b id="materialClient">$0.00</b></div>
              <div class="oda-line"><span>Luz + MÃ¡quina</span><b id="machineCost">$0.00</b></div>
              <div class="oda-line"><span>Mano de Obra</span><b id="laborCost">$0.00</b></div>
              <div class="oda-line"><span>Extras</span><b id="extrasCost">$0.00</b></div>
              <div class="oda-line oda-warn-text"><span>Riesgo</span><b id="riskCost">$0.00</b></div>

              <div class="oda-sep"></div>

              <div class="oda-line small-text"><span>Costo Real (Material+Luz)</span><span id="realCost">$0.00</span>
              </div>
              <div class="oda-line small-text"><span>Margen</span><span id="profitPct">0%</span></div>
              <div class="oda-line small-text"><span>MÃ­nimo Aplicado</span><span id="minApplied">No</span></div>
            </div>
          </div>
        </div>
      </aside>

    </section>
  </main>

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- Hidden Assets for PDF -->
  <img src="assets/images/oda.png" id="logoForPdf" style="display: none;" alt="ODA Logo" crossorigin="anonymous">

  <!-- JS -->
  <script src="js/calculadora.js?v=5" defer></script>
</body>

</html>